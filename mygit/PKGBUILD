pkgname=mygit
pkgver=0.1.0
pkgrel=1
pkgdesc="Simple self-hosted git server, written in Rust"
arch=('x86_64' 'armv7h')
url="https://github.com/alexwennerberg/mygit"
license=("AGPL-3.0")
makedepends=("git" "cargo")
provides=(${pkgname})
conflicts=(${pkgname})
source=("https://github.com/alexwennerberg/${pkgname}/archive/refs/tags/v0.1.0.tar.gz"
	"${pkgname}.service")
sha256sums=(
	"SKIP"
	"SKIP")

build() {
	cd "${srcdir}/${pkgname}-${pkgver}"
	cargo build --release --target-dir=target
}

package() {
	install -Dm644 "${srcdir}/mygit.service"					"${pkgdir}/usr/lib/systemd/system/mygit.service"

	install -Dm755 "${srcdir}/${pkgname}-${pkgver}/target/release/${pkgname}"	"${pkgdir}/usr/bin/${pkgname}"
	install -Dm755 "${srcdir}/${pkgname}-${pkgver}/mygit.toml"			"${pkgdir}/etc/mygit.toml"
}
